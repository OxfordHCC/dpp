{"version":3,"file":"static/js/main.chunk.js","sources":["/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/style/history.less","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/style/settings.less","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/index.css","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/style/google-import.css","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/style/intersection-card.css","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/style/intersection-list.css","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/workers/compression.worker.js","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/workers/intersection.worker.js","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/actions/history.js","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/actions/settings/detectionServices.js","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/component/current-intersections.js","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/component/intersection-card.js","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/component/intersection-list.js","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/component/map.js","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/component/recent-intersections.js","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/container/current.jsx","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/container/detectionServiceList.jsx","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/container/google-import.jsx","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/container/history-navigation.jsx","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/container/history.jsx","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/container/main.jsx","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/container/settings.jsx","webpack:///./src/index.css?f3f6","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/index.jsx","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/lib/credentials.js","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/lib/devices.js","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/lib/geometry.js","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/lib/intersection.js","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/lib/location.js","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/lib/native.js","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/lib/native/android.js","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/lib/native/ios.js","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/lib/native/mock.js","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/lib/native/nativeInterface.js","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/lib/native/web.js","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/lib/openroute.js","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/lib/remote.js","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/lib/store.js","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/lib/util.js","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/reducers/history.js","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/reducers/index.js","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/reducers/settings/detectionServices.js","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/reducers/settings/index.js","/Users/alexzugravu/workspace/max/p_tracker/client/web-react/src/serviceWorker.js","webpack:///./src/style/google-import.css?54b9","webpack:///./src/style/history.less?96b9","webpack:///./src/style/intersection-card.css?4518","webpack:///./src/style/intersection-list.css?6410","webpack:///./src/style/settings.less?4373"],"sourcesContent":["// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".history.page {\\n  display: flex;\\n  overflow: hidden;\\n}\\n.history.page .vertical-scroll-container {\\n  display: flex;\\n  flex-direction: column;\\n  overflow: hidden;\\n}\\n.history.page .fill {\\n  flex: 1;\\n}\\n.history.page .sidebar .history-nav .intersection-list .cards {\\n  overflow: auto;\\n}\\n.history.page #map {\\n  flex: 1;\\n}\\n@media (max-width: 600px) {\\n  .history.page {\\n    flex-direction: column-reverse;\\n  }\\n  .history-nav {\\n    flex-direction: column-reverse;\\n  }\\n  .history-nav .header {\\n    flex-direction: column-reverse;\\n  }\\n  .history-nav .intersection-list .cards {\\n    max-height: 50vh;\\n  }\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".page.settings {\\n  margin: 20px;\\n  overflow: hidden;\\n}\\n.page.settings .header {\\n  align-items: center;\\n}\\n.page.settings .back-link {\\n  display: flex;\\n  align-items: center;\\n}\\n.page.settings .settings-container {\\n  display: flex;\\n  position: relative;\\n  transition: left 0.3s;\\n  left: 0vw;\\n}\\n.page.settings .menu {\\n  max-width: 300px;\\n}\\n#settings-page-root {\\n  background-color: white;\\n}\\n#settings-page-root #back {\\n  display: none;\\n}\\n@media (max-width: 600px) {\\n  .page.settings .menu {\\n    max-width: 600px;\\n  }\\n  .page.settings .settings-container.expanded {\\n    left: -100vw;\\n  }\\n  #settings-page-root {\\n    position: absolute;\\n    width: 100%;\\n    height: 100%;\\n    top: 0;\\n    left: 100vw;\\n  }\\n  #settings-page-root #back {\\n    display: flex;\\n  }\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/api.js\");\nvar ___CSS_LOADER_AT_RULE_IMPORT_0___ = require(\"-!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-3-1!../node_modules/postcss-loader/src/index.js??postcss!leaflet/dist/leaflet.css\");\nvar ___CSS_LOADER_GET_URL_IMPORT___ = require(\"../node_modules/css-loader/dist/runtime/getUrl.js\");\nvar ___CSS_LOADER_URL_IMPORT_0___ = require(\"material-design-icons/iconfont/MaterialIcons-Regular.woff2\");\nvar ___CSS_LOADER_URL_IMPORT_1___ = require(\"material-design-icons/iconfont/MaterialIcons-Regular.woff\");\nvar ___CSS_LOADER_URL_IMPORT_2___ = require(\"material-design-icons/iconfont/MaterialIcons-Regular.ttf\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\nexports.i(___CSS_LOADER_AT_RULE_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\nvar ___CSS_LOADER_URL_REPLACEMENT_2___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_2___);\n// Module\nexports.push([module.id, \"body {\\n  margin: 0;\\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\\n    sans-serif;\\n  -webkit-font-smoothing: antialiased;\\n  -moz-osx-font-smoothing: grayscale;\\n}\\n\\ncode {\\n  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',\\n    monospace;\\n}\\n\\n#root{\\n\\tdisplay:flex;\\n\\tflex-direction:column;\\n\\theight:100vh;\\n}\\n.page{\\n\\tflex:1 1;\\n}\\n\\n.menu{\\n\\t\\n}\\n\\n@font-face{\\n\\tfont-family: 'Material Icons';\\n\\tfont-style: normal;\\n\\tfont-weight: 400;\\n\\tsrc: local('Material Icons'),\\n\\tlocal('MaterialIcons-Regular'),\\n\\turl(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \") format(\\\"woff2\\\"),\\n\\turl(\" + ___CSS_LOADER_URL_REPLACEMENT_1___ + \") format(\\\"woff\\\"),\\n\\turl(\" + ___CSS_LOADER_URL_REPLACEMENT_2___ + \") format(\\\"truetype\\\");\\n}\\n\\n.m-i{\\n\\tfont-family: 'Material Icons';\\n\\tfont-weight: normal;\\n\\tfont-style: normal;\\n\\tfont-size: 24px;\\n\\tdisplay:inline-block;\\n\\tline-height: 1;\\n\\ttext-transform: none;\\n\\tletter-spacing: normal;\\n\\tword-wrap: normal;\\n\\twhite-space: nowrap;\\n\\tdirection: ltr;\\n\\t-webkit-font-smoothing: antialiased;\\n\\ttext-rendering:optimizeLegibility;\\n\\t-moz-osx-font-smoothing: grayscale;\\n\\tfont-feature-settings: 'liga';\\n}\\n\\n\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\\n#google-import #import-log {\\n        height: 300px; \\n        overflow: scroll; \\n        background-color: lightgrey; \\n        font-family: Lucida Console, Courier, monospace;\\n}\\n\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \".intersection-card{\\n    min-width:200px;\\n    box-shadow: 1px 1px 3px 0px gray;\\n    margin:10px;\\n    border-radius:10px;\\n}\\n.intersection-card .title{\\n    font-weight:bold;\\n    \\n}\\n\\n.intersection-card .controller-list{\\n}\\n\\n.intersection-card .details{\\n    max-height:0;\\n    transition: max-height 0.15s ease-out;\\n    overflow:hidden;\\n}\\n\\n.intersection-card .details.expanded{\\n    max-height:600px;\\n    transition: max-height 0.25s ease-in;\\n}\\n\\n.intersection-card .inner{\\n    padding:10px;\\n}\\n\\n.intersection-card .bottom{\\n    text-align: right;\\n}\\n\\n.intersection-card .manifest-details{\\n    margin-left:20px;\\n}\\n\\n.intersection-card .provenance{\\n    color: grey;\\n}\\n\\n.Pane{\\n    margin-left:20px;\\n}\", \"\"]);\n// Exports\nmodule.exports = exports;\n","// Imports\nvar ___CSS_LOADER_API_IMPORT___ = require(\"../../node_modules/css-loader/dist/runtime/api.js\");\nexports = ___CSS_LOADER_API_IMPORT___(false);\n// Module\nexports.push([module.id, \"\", \"\"]);\n// Exports\nmodule.exports = exports;\n","module.exports = __webpack_public_path__ + \"static/js/0.chunk.worker.js\"","module.exports = __webpack_public_path__ + \"static/js/1.chunk.worker.js\"","import intersection from \"../lib/intersection\";\n\nexport const UPDATE_HISTORY_ENTRIES = \"UPDATE_HISTORY_ENTRIES\";\nexport const updateHistory = (entries) => ({\n    type: UPDATE_HISTORY_ENTRIES,\n    entries\n});\n\nexport const SELECT_DATE = \"SELECT_DATE\";\n const selectDate = (selectedDateISO) => ({\n    type: SELECT_DATE,\n    selectedDateISO\n});\n\n\nexport const showHistory = (date) => async (dispatch) => {\n    const selectedDate = new Date(date);\n    console.log('show history', date);\n    if(selectedDate > new Date()){\n        return;\n    }\n    await dispatch(selectDate(date));\n    const fromMs = selectedDate.setHours(0,0,0,0);\n    const toMs = fromMs + 24 * 60 * 60 * 1000;\n    const entries = await intersection.get(fromMs, toMs);\n    await dispatch(updateHistory(entries));\n    return;\n}","import native from '../../lib/native';\n\nexport const UPDATE_STATUS = \"UPDATE_STATUS\";\nexport const updateStatus = (service, status) => ({\n\ttype: UPDATE_STATUS,\n\tservice,\n\tstatus\n});\n\nexport const SET_LIST = \"SET_LIST\";\nexport const setList = (list) => ({\n\ttype: SET_LIST,\n\tlist\n})\n\nexport const toggle = (service) => async (dispatch, getState) =>  {\n\t//call native, get reply and update_status with reply\n\tconst status = await native.settings.toggleService(service);\n\tdispatch(updateStatus(service, status));\n};\n\nconst shouldInit = (state) => {\n\tconst services = state.settings.detectionServices;\n\tif(services.length === 0){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport const init = () => async (dispatch, getState) => {\n\tif(!shouldInit(getState())){\n\t\treturn;\n\t}\n\tconst services = await native.getServices();\n\treturn dispatch(setList(services));\n};\n\nexport default { toggle, init };\n","import React from 'react';\nimport IntersectionList from './intersection-list';\n\nconst NoIntersections = () => {\n    return <div className=\"no-intersections\">No intersections</div>\n}\n\nconst CurrentIntersections = ({intersections}) => {\n    return(\n        <div className=\"current-intersections\">\n            {   \n            intersections.length > 0 ? \n                <IntersectionList intersections={intersections}/> : \n                <NoIntersections/>\n            }\n        </div>\n    );\n}\n\nexport default CurrentIntersections;","import React from 'react';\nimport '../style/intersection-card.css';\nimport Panel from '@atlaskit/panel';\n\nconst timeFormatter = Intl.DateTimeFormat('en-GB', {\n    hour: 'numeric',\n    minute: 'numeric'\n});\n\nconst TimeLabels = ({start, end}) => {\n    if(!start && !end){\n        return;\n    }\n\n    let startTimeLabel = start && timeFormatter.format(new Date(start));\n    let endTimeLabel = end && timeFormatter.format(new Date(end));\n    startTimeLabel = startTimeLabel || endTimeLabel;\n    endTimeLabel = endTimeLabel || startTimeLabel;\n\n    if(startTimeLabel === endTimeLabel){\n        return <div className = \"times\">{startTimeLabel}</div>\n    }\n\n    return <div className = \"times\">{startTimeLabel} - {endTimeLabel}</div>\n}\n\n\nconst IntersectionCard = ({intersection, expanded = false}) => {\n    \n\n    const Header = (pManifest) => (\n        <span className=\"title\">\n            { pManifest.name || getGenericName(pManifest) }\n        </span>\n    );\n\n    const getDetectionType = (intersection) => {\n        if(intersection.detectionType === 'geolocation'){\n            return \"🌍 Geolocation\";\n        }\n        return;\n    }\n    const getGenericName = (pManifest) => {\n        if(pManifest['man_made']){\n            const manMade = pManifest['man_made'];\n            if(manMade === 'surveillance'){\n                return \"👁️ Surveillance device\"\n            }\n        }\n        return 'Unnamed device';\n    }\n  \n    const Description = (pManifest) => {\n       return  Object.keys(pManifest).map(k => {\n            let value = pManifest[k];\n            if(Array.isArray(value)){\n                value = value.join();\n            }\n            return <div key={k}>{k}: {value}</div>\n        })\n    }\n\n    return (\n        <div className=\"intersection-card\">\n            <div className=\"inner\">\n                <div className=\"manifest-details\">\n                    <TimeLabels start={intersection.startMs} end={intersection.endMs}/>\n                    <Panel header={Header(intersection.device.privacy_manifest)}>\n                        <div className=\"description\">\n                            {Description(intersection.device.privacy_manifest)}\n                        </div>\n                    </Panel>\n                </div>\n                <div className=\"bottom\">\n                    <div className=\"provenance\">{getDetectionType(intersection)}</div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default IntersectionCard;","import React from 'react';\nimport { Unique } from '../lib/util';\nimport IntersectionCard from './intersection-card';\nimport '../style/intersection-list.css';\n\nconst IntersectionList = ({intersections}) => {\n\n    const categories = intersections.filter(Unique('provenance')).map(x => x.provenance)\n    const intersectionCards = intersections.map(intersection => \n        <IntersectionCard intersection={intersection} /> \n    );\n\n    return (\n        <div className=\"intersection-list vertical-scroll-container\">\n            <div className=\"filters\">\n                {categories.map(cat => <span>{cat}</span>)}\n            </div>\n            <div className=\"cards\">\n                {intersectionCards}\n            </div>\n        </div>\n    );\n}\n\nexport default IntersectionList;","import React from 'react';\nimport L from 'leaflet';\n\nwindow.L = L;\n\nexport default class Map extends React.Component{\n    constructor(props){\n        super(props);\n\n        this.state = {\n            center: this.getCenter(props)\n        }\n\n        console.log('map constructor');\n    }\n\n    getCenter(props){\n        if(props.bounds && props.bounds.length ===2){\n            return L.latLngBounds(props.bounds).getCenter();\n        }\n        if(props.latitude && props.longitude){\n            return [props.latitude, props.longitude];\n        } \n        return [0,0];\n    }\n\n    drawPath(path){\n        const points = path.points.filter(x => x !== undefined);\n        const line = L.polyline(points, path.options).addTo(this.userLayer);\n        const _path = line._path;\n        const pathLen = _path.getTotalLength();\n        const pxSecSpeed = 1000/1; //1000px/s;\n        const time = pathLen / pxSecSpeed;\n        _path.style.setProperty('--pathLength', pathLen);\n        _path.style.setProperty('--time', `${time}s`);\n        setTimeout(() => {\n            _path.style.setProperty('stroke-dasharray', 0);\n        },time+100);\n    }\n\n    drawCircle({point, options}){\n        return L.circle(point, options).addTo(this.userLayer);\n    }\n\n    drawMarker({point, options}){\n        return L.marker(point, options).addTo(this.userLayer);\n    }\n\n    componentDidUpdate(prevProps){\n        this.userLayer.clearLayers();\n        //for each path, draw path\n        if(this.props.paths){\n            this.props.paths.filter(x => x !== undefined)\n                .forEach(path => this.drawPath(path));\n        }\n        if(this.props.markers){\n            this.props.markers.filter(x => x !== undefined)\n                .forEach(x => this.drawMarker(x));\n        }\n        if(this.props.circles){\n            this.props.circles.filter(x => x !== undefined)\n                .forEach(x => this.drawCircle(x));\n        }\n        this.center = this.getCenter(this.props);\n        this.zoom = (this.props.bounds && this.props.bounds.length===2 && this.mapElem.getBoundsZoom(this.props.bounds)) || 16;\n        this.mapElem.flyTo(this.center, this.zoom);\n    }\n\n    componentDidMount(){\n        const longPress = {\n            timeout: null,\n            threshold: 1500\n        };\n\n        this.mapElem = L.map('map', {\n            zoomControl: false,\n            attributionControl: false,\n            center: this.state.center,\n            zoom: 16,\n            layers:[\n                L.tileLayer(`https://stamen-tiles.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png`,{\n                    attribution: \"Tile layer by stamen.com\"\n                })\n            ]\n        });\n        \n        this.mapElem.on('mouseup', (evt) => {\n            clearTimeout(longPress.timeout);\n            if(this.props.onMouseUp && typeof this.props.onMouseUp === 'function'){\n                this.props.onMouseUp(evt);\n            }\n            if(!this.moved){\n                if(this.props.onMouseClick && typeof this.props.onMouseClick === 'function'){\n                    this.props.onMouseClick(evt);\n                }\n            }\n        });\n        \n        this.mapElem.on('mousedown', (evt) => {\n            this.moved = false;\n            longPress.timeout = setTimeout(() => {\n                console.log('long press');\n            }, longPress.threshold);\n            if(this.props.onMouseDown && typeof this.props.onMouseDown === 'function'){\n                this.props.onMouseDown(evt);\n            }\n        });\n\n        this.mapElem.on('move', (evt) => {\n            this.moved = true;\n            clearTimeout(longPress.timeout);\n        });\n\n        this.userLayer = L.layerGroup().addTo(this.mapElem);\n    }\n\n    render(){\n        return <div className=\"map\" id=\"map\" ></div>\n    }\n}","import React from 'react';\nimport IntersectionList from './intersection-list';\n\nconst RecentIntersections = ({ intersections }) => {\n    return (\n        <div className=\"recent-intersections\">\n            Recent intersections:\n            <IntersectionList intersections={intersections}/>\n        </div>\n    );\n}\n\nexport default RecentIntersections;","import React from 'react';\nimport { connect } from 'react-redux';\nimport CurrentIntersections from '../component/current-intersections';\nimport RecentIntersections from '../component/recent-intersections';\n\n/**\n * Main container shows currently intersecting controllers and the most recent\n * intersections.\n *  \n */\n\nconst Current = ({ recentIntersections, currentIntersections }) => {\n    return (\n\t\t<div className=\"main page\">\n            <CurrentIntersections intersections={currentIntersections}/>\n        </div>\n    );\n}\n\nconst connectState = (state) => {\n    return {\n        currentIntersections: [],\n        recentIntersections: []\n    };\n};\n\nexport default connect(connectState)(Current);\n","import React from 'react';\nimport { connect } from 'react-redux';\nimport { toggle } from '../actions/settings/detectionServices';\nimport { FakeButton } from './settings';\nimport { Checkbox } from 'semantic-ui-react';\n\nconst detectionServiceList = ({ services, toggleService }) => {\n\tconsole.log('services is ',services);\n\treturn (\n\t\t<div className=\"detection-list\">\n          {\n\t\t\t  services.map(serv => (\n\t\t\t\t  <FakeButton key={serv.id}>\n\t\t\t\t\t<Checkbox toggle\n\t\t\t\t\t\t\t  label={serv.name}\n\t\t\t\t\t\t\t  onChange={() => toggleService(serv.id) }\n\t\t\t\t\t\t\t  checked={serv.status}/>\n\t\t\t\t  </FakeButton>\n\t\t\t  ))\n\t\t  }\n\t\t</div>\n\t);\n};\n\nconst connectState = (state) => ({\n\tservices: state.settings.detectionServices\n});\n\nconst connectDispatch = (dispatch) => ({\n\ttoggleService: (name) => dispatch(toggle(name))\n});\n\n\nexport default connect(connectState, connectDispatch)(detectionServiceList);\n","import React from 'react';\nimport { deNormCoord } from '../lib/util.js';\nimport location from '../lib/location.js';\nimport '../style/google-import.css';\n\n\nconst GoogleImport = () => {\n    const fileInput = React.createRef();\n    // const importProgressSpan = React.createRef();\n    // const importDetailsSpan = React.createRef();\n    // const importLog = React.createRef();\n\n    const [progress, setProgress] = React.useState('');\n    const [details, setDetails] = React.useState({});\n    const [log, setLog] = React.useState([]);\n\n    const state = {\n        stopImport: false\n    }; \n    React.useEffect(() => {\n        console.log('called use effect');\n        fileInput.current.onchange = (evt) => {\n            const file = evt.target.files[0];\n            importHistory(file, state, {\n                onClose: () => {\n                    console.log('on close called');\n                    // importDetailsSpan.current.textContent = '';\n                    // importProgressSpan.current.textContent = \"Stopped!\";\n                    //setProgress(0);\n                    evt.target.value = null;\n                },\n                onLog: (str) => {\n                    // let line = document.createElement('div');\n                    // line.textContent = `${Date.now()} > ${str}`;\n                    // importLog.current.appendChild(line);\n                },\n                onReadChunk: (chunkIndex) => {\n                    // importProgressSpan.current.textContent = `Reading chunk ${chunkCount}`;\n                    setProgress(chunkIndex / details.chunkLen);\n                    console.log('details is ', details)\n                    setDetails({\n                        ...details,\n                        chunkIndex\n                    });\n                },\n                onStart: (chunkSize) => {\n                    // importLog.current.innerHTML = \"\";\n                    console.log('Started import...', file.size, chunkSize);\n                    const fileSize = file.size;\n                    let chunkLen = Math.ceil(fileSize / chunkSize);\n                    console.log('chunkLen', chunkLen);\n                    setDetails({\n                        fileSize,\n                        chunkSize,\n                        chunkLen,\n                        chunkIndex: 0\n                    });\n                    console.log('details is ', details);\n                }\n            });\n        }\n    },[details, fileInput, state]);\n\n\n    const stopImport = () => {\n        console.log('clicked stopImport');\n        state.stopImport = true;\n    }\n\n    return (\n        <div className=\"settings-page\" id=\"google-import\">\n            <h3>Import Google Location History</h3>\n            Download your google location data and import file from ./Takeout/Location History.json (after unzipping).\n            <div>\n                <input ref={fileInput} type=\"file\" accept=\".json\"/>\n            </div>\n            <div>\n                <div>\n                    <span id=\"import-progress-detail\">\n                        File size: {details.fileSize}\n                        Chunk size: {details.chunkSize}\n                        Reading chunk {details.chunkIndex} out of {details.chunkLen}.\n                    </span>\n                </div>\n                <div>\n                    Progress: <span id=\"import-progress\">{progress}</span>\n                </div>\n                <div><button id=\"stop-import\" onClick={stopImport}>Stop</button></div>\n                <div>\n                    <div id=\"import-log\">{}</div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\n//Read file chunk by chunk so we don't kill the browser.\nfunction importHistory(file, state, listeners){\n    //WARNING FRAGILE CODE AHEAD\n\t//DO NOT CHANGE\n\tconst HEADER = `{\n  \"locations\" : [ `;\n\tconst FOOTER = `]\n}`;\n\tconst CLOSED_CURLY_BRACE = 125;\n\t//OK, CAN CHANGE FROM HERE \n\tconst CHUNK_SIZE = 1000 * 1024; //1MB \n\tlet ARR_END = file.size - FOOTER.length;\n\tlet start = HEADER.length; //skip header\n\tlet chunkCount = 0;\n\n\tlet textEncoder = new TextEncoder();\n\n\tconst domLog = (str) => listeners && listeners.onLog && listeners.onLog(str);\n\n\tconst reader = new FileReader();\n\n\t//flIndicator -- f(irst)l(evel)Indicator -- when we pass latitudeE7 \n\t//we know we're on the first level\n\tconst flIndicatorUint8 = textEncoder.encode('latitudeE7');\n\t\n\tconst reachedFirstLevel = (i, buffer) => {\n\t\tfor(let j = 0, n = flIndicatorUint8.length; j < n; j++){\n\t\t\tif(flIndicatorUint8[j] !== buffer[i+j]){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\treader.onload = async () => {\n\t\tlet buffer = new Uint8Array(reader.result);\n\t\tlet end = start + buffer.length;\n\t\tlet onFirstLevel = false;\n\t\tconst isLastChunk = (start + CHUNK_SIZE) >= ARR_END;\n\n\t\t//BEFORE:\n\t\t//{____________},_{_____\n\t\t//[START          END]     <-- \"buffer pointers\"\n\t\tfor(let i = buffer.length; i > 0; i--){\n\t\t\tif(reachedFirstLevel(i, buffer)){\n\t\t\t\tonFirstLevel = true;\n\t\t\t}\n\t\t\tif(onFirstLevel && buffer[i] === CLOSED_CURLY_BRACE){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tend = end-1;\n\t\t}\n\t\tend +=1;\n\t\t//AFTER: \n\t\t//{____________},_{_____  \n\t\t//[START    END]           <-- \"buffer pointers\"\n\n\t\t//process array between start, end;\n\t\tawait processChunk(buffer.slice(0, end-start), chunkCount);\n\t\tchunkCount +=1;\n\n\t\tstart = end + 2; //skip ', ';\n\t\tif(start < ARR_END && !state.stopImport && !isLastChunk){\n\t\t\tseek();\n\t\t}else{\n\t\t\tlisteners && listeners.onClose && listeners.onClose();\n\t\t}\n\t}\n\n\t//TODO: if the entries in the tail were duplicates,\n\t//the head of the next chunk may continue the series\n\t//of duplicates.\n\tasync function processChunk(buffer, cC){\n\t\tconst ascii \t= new TextDecoder('utf8').decode(buffer);\n\t\ttry{\n\t\t\tconst jsonData \t= JSON.parse(`${HEADER}${ascii}${FOOTER}`);\n\t\t\tconst entries \t= jsonData.locations.map(googleEntry => ({\n\t\t\t\ttimestampMs: Number(googleEntry.timestampMs),\n\t\t\t\tlatitude: deNormCoord(googleEntry.latitudeE7),\n\t\t\t\tlongitude: deNormCoord(googleEntry.longitudeE7),\n\t\t\t\taccuracy: googleEntry.accuracy\n\t\t\t}));\n\n\t\t\tdomLog(`[chunk ${cC}] : ${entries.length} entries`);\n\t\t\tlet res = await location.bulkPut(entries);\n\t\t\tdomLog(`[chunk ${cC}]: stored ${res} compressed entries`);\n\t\t\tlisteners && listeners.onReadChunk && listeners.onReadChunk(cC);\n\t\t}catch(err){\n\t\t\tconsole.error(err);\n\t\t\treader.abort();\n\t\t\tprintTail(buffer.length-1, buffer);\n\t\t\treturn Promise.reject(err);\n\t\t}\n\t}\n\n\tfunction seek(){\n\t\tlet end = start + CHUNK_SIZE;\n\t\tif(end > ARR_END){\n\t\t\tend = ARR_END;\n\t\t}\n\t\tlet slice = file.slice(start, end);\n\t\treader.readAsArrayBuffer(slice);\n\t}\n\tseek();\n\tlisteners && listeners.onStart && listeners.onStart(CHUNK_SIZE);\n}\n\n//DEBUGGING FNs\nfunction printSlice(slice){\n\tconsole.log(new TextDecoder('utf-8').decode(slice));\n}\n\nfunction printTail(i, buffer){\n\tconsole.log('TAIL: printing position', i);\n\tconst windowSize = 50;\n\tlet slice = buffer.slice(i-windowSize, i);\n\tprintSlice(slice);\n}\n\nfunction printHead(i, buffer){\n\tconsole.log('HEAD: printing position', i);\n\tconst windowSize = 50;\n\tlet slice = buffer.slice(i, i+windowSize);\n\tprintSlice(slice);\n}\n\n\nexport default GoogleImport;","import React from 'react';\nimport IntersectionList from '../component/intersection-list';\n\n\nconst HistoryNavigation = ({ intersections, date }) => {\n    console.log('history navigation: ', date);\n    const dateFormat = { month: 'long', day: 'numeric' };\n    const selectedDate = new Date(date);\n    const selectedDateString = selectedDate.toLocaleString('en-GB', dateFormat);\n    const urlDate = date => new Date(date).toISOString().split('T')[0];\n    \n    const nextDay = () => {\n        const newDate = new Date(selectedDate);\n        newDate.setDate(selectedDate.getDate()+1);\n        window.location.hash = `#history/${urlDate(newDate)}`;\n    }\n\n    const prevDay = () => {\n        const newDate = new Date(selectedDate);\n        newDate.setDate(selectedDate.getDate()-1);\n        window.location.hash = `#history/${urlDate(newDate)}`;\n    }\n\n    return (\n        <div className=\"history-nav vertical-scroll-container\">\n            <div className=\"header\">\n                <div className=\"title\">\n                    {selectedDateString}\n                </div>\n                <div className=\"controls\">\n                    <button onClick={prevDay}>Prev</button>\n                    <button onClick={nextDay}>Next</button>\n                </div>\n            </div>\n            <IntersectionList intersections={intersections}></IntersectionList>\n        </div>\n    );\n}\n\n\nexport default HistoryNavigation;","import React from 'react';\nimport { connect } from 'react-redux';\nimport Map from '../component/map';\nimport HistoryNavigation from '../container/history-navigation';\nimport '../style/history.less';\nimport { showHistory } from '../actions/history';\nimport { useParams } from 'react-router-dom';\n\n\nconst getDeviceCircle = (point) => point && {\n    point: [point.latitude, point.longitude],\n    options: {\n        radius: point.radius || 30,\n        color: \"red\",\n        stroke: false\n    }\n}\n\nconst getIntersectionCircle = (point) => ({\n    point: [point.device.latitude, point.device.longitude],\n    options: {\n        radius: point.accuracy || 30,\n        color:'red',\n    }\n})\n\nconst getLocationCircle = (entry) => ({\n    point: [entry.latitude, entry.longitude],\n    options: {\n        radius: entry.accuracy,\n        color: 'blue',\n        stroke: false\n    }\n})\n\nconst getOpenRouteLine = (points) => ({\n    points: points.map(({latitude, longitude}) => [latitude, longitude]), \n    options: {\n        color: \"#7d7dff\",\n        className: \"animated-path\",\n        weight: 5\n    }\n});\n\nconst History = ({ intersections, openroutes, locations, devices, bounds, showHistory }) => {\n\tconst params = useParams();\n\tconsole.log('params', params);\n    const date = new Date(params.date).toISOString();\n\t\n\tconsole.log('history params date', date);\n    React.useEffect(() => {\n        console.log('use effect called', date);\n        showHistory(date);\n    }, [date, showHistory]);\n    \n    const deviceCircles = devices.map(getDeviceCircle);\n    const locationCircles = locations.map(getLocationCircle);\n    const intersectionCircles = intersections.map(getIntersectionCircle);\n    const paths = openroutes && [getOpenRouteLine(openroutes)];\n    \n    return (\n    <div className=\"history page\"> \n        <div className=\"sidebar vertical-scroll-container\">\n            <HistoryNavigation intersections={intersections} date={date}/>\n        </div>\n        <Map \n            paths = {paths}\n            circles = {[...deviceCircles, ...locationCircles, ...intersectionCircles]}\n            bounds = {bounds}\n        />\n    </div>\n    );\n};\n\nconst connectState = (state) => state.history.entries;\n\nconst connectDispatch = (dispatch) => ({\n    showHistory: (date) => dispatch(showHistory(date))\n});\n\nexport default connect(connectState, connectDispatch)(History);\n","import React from 'react';\nimport {\n    useRouteMatch,\n    HashRouter,\n    Route,\n    Link,\n    Redirect,\n    useHistory,\n    Switch\n} from 'react-router-dom';\nimport Current from \"./current\";\nimport Settings from \"./settings\";\nimport History from \"./history\";\nimport { Menu, Icon } from 'semantic-ui-react';\n\nconst CustomMenuItem = ({ to, children }) => {\n    const match = useRouteMatch({\n        exact: false,\n        path: to\n    });\n    const history = useHistory();\n\n    const goToRoute = () => {\n        history.push(to);\n    };\n    \n    return (\n        <Menu.Item active={match !== null} onClick={goToRoute}>\n          {children}\n        </Menu.Item>\n    );\n}\n\nconst Main = () => {\n    const defaultDate = new Date().toISOString().split('T')[0];\n    \n\treturn (\n        <HashRouter>\n          <Switch>\n            <Redirect exact from=\"/history\" to={`/history/${defaultDate}`}/>\n            <Route path=\"/history/:date\">\n              <History/>\n            </Route>\n            <Route path=\"/settings\">\n              <Settings/>\n            </Route>\n            <Route path=\"/\">\n              <Current/>\n            </Route>     \n          </Switch>\n          <div className=\"menu\">\n            <Menu widths={3} fluid icon='labeled'>\n              <CustomMenuItem to=\"/current\">\n                <Icon name=\"gamepad\"/>\n                Current\n              </CustomMenuItem>        \n              <CustomMenuItem to=\"/history\">\n                <Icon name=\"gamepad\"/>\n                History\n              </CustomMenuItem>        \n              <CustomMenuItem to=\"/settings\">\n                <Icon name=\"gamepad\"/>\n                Settings\n              </CustomMenuItem>        \n           </Menu>\n          </div>\n        </HashRouter>\n    );\n};\n\nexport default Main;\n","import React from 'react';\nimport GoogleLocationImport from './google-import';\nimport credentials from '../lib/credentials';\nimport DetectionServiceList from './detectionServiceList';\nimport { connect } from 'react-redux';\nimport { ButtonItem, MenuGroup, Section } from '@atlaskit/menu';\nimport '../style/settings.less';\n\nconst NoPage = () => {\n    return <div>Empty settings pages</div>;\n};\n\nconst classObj = (style) => Object.entries(style)\n    .filter(([k,v]) => v)\n    .map(([k, v]) => k)\n    .join(' ');\n\nexport const FakeButton = props => {\n    const styleFn = currentStyles => ({\n        ...currentStyles,\n        '&: hover': {\n            'backgroundColor': 'transparent'\n        }\n    });\n    return <ButtonItem elemBefore={props.elemBefore} cssFn={styleFn}>{props.children}</ButtonItem>;\n};\n\n//TODO: use react routing for sub-routes.\nconst Settings = (params) => {\n    const [page, showPage] = React.useState(<NoPage/>);\n    const [subtitle, setSubTitle] = React.useState(null);\n\n    let openrouteInput = React.createRef();\n\n    React.useEffect(() => {\n        const getAPIKey = async () => {\n            openrouteInput.current.value = await credentials.getKey('openroute') || '';\n        };\n        getAPIKey();\n    },[]);\n\n    const hidePage = () => {\n        setSubTitle(null);\n    };\n\n    const selectPage = (title, component) => {\n        showPage(component);\n        setSubTitle(title);\n    };\n\n    const BackButton = () => {\n        if(subtitle !== null){\n            return <a href=\"#settings\" className=\"back-link\" onClick={hidePage}>\n                <i className=\"m-i\">navigate_before</i>\n                Back\n            </a>;\n        }\n        return <a href=\"#history\" className=\"back-link\">\n            <i className=\"m-i\">navigate_before</i>\n            Back\n        </a>;\n    };\n\n    let timeout;\n    const onOpenRouteChange = (evt) => {\n        const val = openrouteInput.current.value.trim();\n        if(timeout){ clearInterval(timeout); }\n        timeout = setTimeout(async () => {\n            await credentials.setKey('openroute', val);\n        }, 500);\n    };\n\n    return (\n        <div className=\"page settings\">\n          <div className=\"header\">\n            <BackButton/>\n            <h1>Settings</h1>\n          </div>\n          <div className={classObj({\n                   \"settings-container\": true, \n                   \"expanded\": subtitle !== null\n\t\t\t   })}>\n            <MenuGroup className=\"menu\">\n\t\t\t  <Section title=\"Detection Services\">\n\t\t\t\t<DetectionServiceList/>\n\t\t\t  </Section>\n              <Section title=\"API Keys\">\n                <FakeButton elemBefore={<i className=\"m-i\">directions</i>}>\n                  <span>Openroute</span> \n                  <input ref={openrouteInput} type=\"text\" onChange={onOpenRouteChange}></input>\n                </FakeButton>\n              </Section>\n              <Section title=\"Import\">\n                <ButtonItem elemBefore={<i className=\"m-i\">history</i>} onClick={() => selectPage(\"Google Import\", <GoogleLocationImport/>)}>\n        Import Google Location history\n        </ButtonItem>\n        <ButtonItem elemBefore={<i className=\"m-i\">publish</i>}>Import DPP file. Coming soon</ButtonItem>\n        </Section>\n        <Section title=\"Export\">\n        <ButtonItem elemBefore={<i className=\"m-i\">get_app</i>}>Export</ButtonItem>\n        </Section>\n        <Section title=\"About\">\n        <p>A short description of the DPP project.<a href=\"#\">More details</a></p>\n        <a href=\"#\">Privacy Policy</a>\n        </Section>\n        </MenuGroup>\n        <div id=\"settings-page-root\">\n        {page}\n        </div>\n        </div>\n        </div>\n    );\n};\n\nconst connectState = (state) => ({\n\n});\n\nconst connectDispatch = (dispatch) => ({\n\n});\n\nexport default connect(connectState, connectDispatch)(Settings);\n","\nvar content = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-3-1!../node_modules/postcss-loader/src/index.js??postcss!./index.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-3-1!../node_modules/postcss-loader/src/index.js??postcss!./index.css\", function() {\n\t\tvar newContent = require(\"!!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-3-1!../node_modules/postcss-loader/src/index.js??postcss!./index.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport thunk from 'redux-thunk';\nimport {Provider} from 'react-redux';\nimport { createStore, applyMiddleware } from 'redux';\nimport './index.css';\nimport 'semantic-ui-css/semantic.min.css';\nimport reducers from './reducers';\nimport * as serviceWorker from './serviceWorker';\nimport Main from './container/main';\nimport { init } from './actions/settings/detectionServices';\n\nconst appRoot = document.getElementById('root');\n\nexport const store = createStore(reducers, applyMiddleware(thunk));\n\nReactDOM.render(\n\t<Provider store={store}>\n\t  <Main/>\n    </Provider>,\n\tappRoot\n);\n\nstore.dispatch(init());\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","//API keys and such\nimport db from './store.js';\nconst API_AUTH_TYPE = 'api-auth';\nconst apiKeys = {};\n\nconst apiKeyInitialization = new Promise(async (resolve, reject) => {\n    try{\n        (await db.meta.toArray())\n        .filter(metaEntry => metaEntry.type === API_AUTH_TYPE)\n        .reduce((acc, curr) => {\n            acc[curr.service] = curr.key;\n            return acc;\n        }, apiKeys)\n        resolve();\n    }catch(err){\n        reject(err);\n    }\n});\n\nasync function getKey(service){\n\tawait apiKeyInitialization;\n\treturn apiKeys[service];\n}\n\nfunction setKey(service, key){\n\treturn db.meta.put({\n        id: `${API_AUTH_TYPE}-${service}`,\n\t\ttype: API_AUTH_TYPE,\n\t\tservice,\n\t\tkey\n\t})\n\t.then(() => {\n\t\tapiKeys[service] = key;\n\t});\n}\n\nexport default { setKey, getKey };","import remote from './remote';\n\n//bounds = [ LatLon, LatLon ]\nasync function getDevicesAround(bounds){\n    try{\n        console.log('bounds is ', bounds);\n        return (await remote.getDevicesBounded(bounds));\n    }catch(err){\n        console.error('Err while getting devices from remote');\n        console.error(err);\n    }\n}\n\nexport default { getDevicesAround };","//TODO: Capitalize point param names\n\n//Get projection of point t on a line (a, b): a line that goes through a and b\nexport function pointProjectionOnLine(t, [a, b]){\n\t//let s be the slope of line (a, b)\n\tlet s = (a.y - b.y) / (a.x - b.x);\n\t//we get the basis(?) of the line, so we can compute the equation of the\n\t//line later\n\tlet bS = a.y - s * a.x;\n\n\t//let r be the slope of the line orthogonal to our line\n\tlet r = - 1 / s;\n\t//since we know that point t is on this line, we can compute the basis of \n\t//this line\n\tlet bR = t.y - r * t.x;\n\n\t//the point we're interested in is on both lines (at the intersection), \n\t//so it satisfies both line equations:\n\t// \t\ty = s * x + bS;\n\t//and \ty = r * x + bR;\n\t//we replace y in the second equation to get x, then get y using x in the first eq.\n\tlet x = (bR - bS) / (s - r);\n\tlet y = s * x + bS;\n\n\treturn {x, y};\n}\n\n//given two overlapping circles, get the middle point of their intersection.\n//c1 - {x, y, r} -> coords and radius of circle 1\n//idm c2\n//d - optional distance param to avoid computing again: usually if this function is called, it's\n//because the distnance has been calculated before.\nexport function getMedianIntersection(c1, c2, d){\n\td = d || distanceCartesian(c1, c2);\n\tlet segment = getIntersectionSegment(c1, c2, d);\n\treturn {\n\t\tx: (segment[0].x + segment[1].x)/2,\n\t\ty: (segment[0].y + segment[1].y)/2\n\t};\n}\n\nexport function getIntersectionSegment(c1, c2, d){\n\tconst s = c1.r + c2.r - d;\n\tconst l = c1.r - s;\n\tconst k = c2.r - s; //why am I not using this? TODO:investigate\n\tconst uc1c2 = [(c2.x - c1.x) / d, (c2.y - c1.y) / d]; //unit vector from c1 to c2\n\tconst uc2c1 = uc1c2.map(c => -c); //invert unit vector (unit vector from c2 to c1)\n\tconst a = {x: c1.x + l * uc1c2[0], y: c1.y + l * uc1c2[1]};\n\tconst b = {x: c2.x + l * uc2c1[0], y: c2.y + l * uc2c1[1]};\n\treturn [a, b];\n}\n\nexport function latLongToCartesian(lat, long, lat0){\n\tif(!lat0){\n\t\tlat0 = lat;\n\t}\n\tconst R = 6371e3; \n\tconst longRad = long * (Math.PI/180);\n\tconst latRad = lat * (Math.PI/180);\n\tconst lat0Rad = lat0 * (Math.PI/180);\n\tconst x = R * longRad * Math.cos(lat0Rad);\n\tconst y = R * latRad;\n\treturn {x, y};\n}\n\nexport function cartesianToLatLong(x, y, lat0){\n\tconst R = 6371e3; \n\tconst lat0Rad = lat0 * (Math.PI/180);\n\tconst longRad = x/(R*Math.cos(lat0Rad));\n\tconst latRad = y/R;\n\tconst latitude = latRad / (Math.PI/180);\n\tconst longitude = longRad / (Math.PI/180);\n\treturn {latitude, longitude};\n}\n\n/*\nDISTANCE BETWEEN POINTS\n*/\n//naive pythagora for flat earthers\nexport function distanceCartesian(a, b){\n\tlet v = a.y - b.y;\n\tlet u = a.x - b.x;\n\treturn Math.sqrt(v * v + u * u);\n}\n\n//https://www.movable-type.co.uk/scripts/latlong.html\nexport function distanceLatLongPythagora(a, b){\n\tconst R = 6371e3;\n\tconst x = (b.longitude - a.longitude) * Math.cos((a.latitude + b.latitude)/2);\n\tconst y = (b.latitude - a.latitude);\n\treturn Math.sqrt(x*x + y*y) * R;\n}\n\n//https://www.movable-type.co.uk/scripts/latlong.html\nexport function distanceLatLongHaversine(a, b){\n\tvar R = 6371e3;\n\tvar φ1 = a.latitude * (Math.PI/180);\n\tvar φ2 = b.latitude * (Math.PI/180);\n\tvar Δφ = (b.latitude-a.latitude) * (Math.PI/180);\n\tvar Δλ = (b.longitude-a.longitude) * (Math.PI/180);\n\n\tvar a = Math.sin(Δφ/2) * Math.sin(Δφ/2) +\n\t\t\tMath.cos(φ1) * Math.cos(φ2) *\n\t\t\tMath.sin(Δλ/2) * Math.sin(Δλ/2);\n\tvar c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\n\n\tvar d = R * c;\n\treturn d;\n}\n\n//given point P on a line and [A, B] a segment on the same line, is P between\n//segment bounds?\nexport function isPointBetween(P, [A, B]){\n\tlet dotProd = (A.x - P.x) * (A.x - B.x) + (A.y - P.y) * (B.y - A.y);\n\tif(dotProd < 0){\n\t\treturn false;\n\t}\n\n\tlet abSquareDist = (A.x - B.x) * (A.x - B.x) + (A.y - B.y) * (A.y - B.y);\n\tif(dotProd > abSquareDist){\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n\nexport function isCircleIntersectingCircle(C1, r1 ,C2 , r2){\n\tif(distanceCartesian(C1, C2) > r1 + r2){\n\t\treturn false;\n\t}\n\treturn true;\n}\n\n//given a circle with center at point C and radius r, and a segment [A, B], \n//does the segment ntersect the circle?\nexport function isSegmentIntersectingCircle(C, r, [A, B]){\n\t//let P = projection of C on (A,B) \n\tlet P = pointProjectionOnLine(C, [A, B]);\n\t//if radius is smaller than the distance between C and its projections, then\n\t//the circle is too far away\n\tlet d = distanceCartesian(C, P);\n\t//console.log('distance between C, P', d);\n\tif(isNaN(d)){\n\t\treturn false;\n\t}\n\n\tif(d > r){\n\t\treturn false;\n\t}\n\n\t//check if  P is between [A, B];\n\tif(!isPointBetween(P, [A, B])){\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n\n//given an array of paths and an array of circles, return their intersections\nexport function getIntersections(paths, devices){\n\tlet res = [];\n\tfor(let i = 0, n = paths.length; i < n; i++){\n\t\tfor(let j = 0, m = devices.length; j < m; j++){\n\t\t\tif(isSegmentIntersectingCircle(devices[j], devices[j].r, paths[i])){\n                res.push({device: devices[j], path: paths[i], pathIndex: i, deviceIndex: j});\n\t\t\t}\n\t\t}\n\t}\n\treturn res;\n}\n\nconst geometryHelper = {\n\tgetIntersections,\n\tisSegmentIntersectingCircle,\n\tisPointBetween,\n\tdistanceCartesian,\n\tpointProjectionOnLine,\n\tlatLongToCartesian,\n\tcartesianToLatLong,\n\tisCircleIntersectingCircle\n}\n\nexport default geometryHelper;","import db from './store';\nimport location from './location';\nimport openroute from './openroute';\nimport device from './devices';\nimport L from 'leaflet';\n\nconst IX_VALID_EDGE = 'intersection-valid-edge-left';\nlet sharedIntersectionWorker;\nfunction getIntersectionWorker(){\n    \n\tif(!sharedIntersectionWorker){\n\t\tsharedIntersectionWorker = new Worker('../workers/intersection.worker.js', {type: 'module'});\n\t}\n\treturn sharedIntersectionWorker;\n}\n\nfunction computeIntersections(entries, devices){\n\tif(!entries || entries.length === 0 || !devices || devices.length === 0){ \n\t\treturn [];\n\t}\n\n\treturn new Promise((resolve, reject) => {\n\t\tconst intersectionWorker = getIntersectionWorker();\n\t\tconst channel = new MessageChannel();\n\t\tconst port1 = channel.port1;\n\t\tconst port2 = channel.port2;\n\t\tport1.onmessage = msg => {\n\t\t\tif(msg.data.event === \"done\"){\n\t\t\t\tresolve(msg.data.entries);\n\t\t\t\tport1.close();\n\t\t\t}\n\t\t}\n\t\tintersectionWorker.onerror = err => reject(err);\n\t\tintersectionWorker.postMessage({entries, devices, port: port2}, [port2]);\n\t});\n}\n\n//TODO: rename to update history\nasync function updateIntersections(fromMs, toMs){    \n    console.log('computing');\n    //get location history\n    const locations = await location.getLocationHistory(fromMs, toMs);\n    console.log('updateIx: locations', locations);\n\n    //get openroute\n    const openroutes = await getEstimatedPath(locations);\n    console.log('updateIx: openroutes', openroutes);\n    if(openroutes.length < 1){\n        return {intersections: [], devices: [], openroutes: [], bounds: [], locations: []};\n    }\n\n    //get bounds for devices\n    const latLonPath = openroutes.map(({latitude, longitude}) => [latitude, longitude]);\n    const bounds = L.polyline(latLonPath).getBounds().pad(0.1);\n    const boundsArr = [bounds.getSouthWest(), bounds.getNorthEast()].map(({lat, lng}) => [lat, lng]);\n\n    const deviceBounds = L.latLngBounds(bounds);\n    const minBounds = deviceBounds.getCenter().toBounds(5000);\n    deviceBounds.extend(minBounds);   \n\n    //get devices\n    const deviceBoundsArr = [deviceBounds.getSouthWest(), deviceBounds.getNorthEast()].map(({lat, lng}) => [lat, lng]);\n    const devices = await device.getDevicesAround(deviceBoundsArr);\n    \n    //compute intersections\n    const intersections = await computeIntersections(openroutes, devices);\n    await db.intersection.bulkPut(intersections);\n\n    //store openroute\n    await db.openroute.where('timestampMs').between(fromMs, toMs).delete();\n    await db.openroute.bulkPut(openroutes);\n    \n    //update IX_VALID_EDGE\n    await db.meta.put({id: IX_VALID_EDGE, value: fromMs});\n\n    return { intersections, devices, openroutes, bounds: boundsArr, locations};\n}\n\n//get history between from and to\nasync function get(fromMs, toMs){\n    const ixValidEdgeObj = (await db.meta.toArray()).find(m => m.id === IX_VALID_EDGE);\n    let ixValidEdge = (ixValidEdgeObj && ixValidEdgeObj.value) || Date.now(); \n    console.log('ixValidEdge', ixValidEdge, fromMs);\n    //Note: true is there to skip retrieval from db since the ixValidEdge check is not correct\n    //TODO: find way to check if need to recompute\n    if(true || ixValidEdge > fromMs){\n        //if invalidated, update and return\n        return updateIntersections(fromMs, toMs);\n    }\n    console.log('retrieving from db');\n    //if not invalidated, we can just retrieve everything from local dbs\n    const intersections = await db.intersection.where('timestampMs').between(fromMs, toMs).toArray();\n    const locations = await location.getLocationHistory(fromMs, toMs);\n    const openroutes = await db.openroute.where('timestampMs').between(fromMs, toMs).toArray();\n    const path = openroutes.map(({latitude, longitude}) => [latitude, longitude]); \n    const bounds = L.polyline(path).getBounds().pad(1);\n    const minBounds = bounds.getCenter().toBounds(5000);\n    bounds.extend(minBounds);\n    const boundsArr = [bounds.getSouthWest(), bounds.getNorthEast()].map(({lat, lng}) => [lat, lng]);\n\n    const devices = await device.getDevicesAround(boundsArr);\n    console.log('returning from intersections',{ intersections, devices, openroutes, bounds: boundsArr, locations});\n    return { intersections, devices, openroutes, bounds: boundsArr, locations};\n}\n\n//TODO: there seems to be a bug with time estimation... need to investigate\nfunction estimateTimestampsNSquared(recorded, estimated){\n\t//this is not euclidean distance, but it's just good enough to determine _relative_ \"likeness\"\n\tconst distance = (a, b) => (a.latitude - b.latitude) * (a.latitude - b.latitude) \n\t\t\t\t\t\t\t+ (a.longitude - b.longitude) * (a.longitude - b.longitude);\n\tlet r = 1;\n\tlet l = r;\n\tlet min = 200;\n\testimated[0].timestampMs = recorded[0].timestampMs;\n\tfor(let i = 1, n = recorded.length; i < n; i++){\n\t\tmin = 200;\n\t\tfor(let j = r, m = estimated.length; j < m; j++){\n\t\t\tlet dist = distance(recorded[i], estimated[j]);\n\t\t\tif(dist < min){\n\t\t\t\tmin = dist;\n\t\t\t\tr = j;\n\t\t\t}\n\t\t}\n\t\tinterpolate(estimated, l, r, recorded[i-1].timestampMs, recorded[i].timestampMs);\n\t\tl = r;\n\t}\n\treturn estimated;\n}\n\n//BORKED, do not use\nfunction matchEntries(recorded, estimated){\n\tconst distance = (a, b) => (a.latitude - b.latitude) * (a.latitude - b.latitude) +\n\t\t\t\t\t\t\t\t(a.longitude - b.longitude) * (a.longitude - b.longitude);\n\n\tlet eL = 1;\n\tlet eR = estimated.length-2;\n\tlet rL = 1;\n\tlet rR = recorded.length-2;\n\n\tlet minDistanceL = 200;\n\tlet minDistanceR = 200;\n\n\tlet lastL = eL;\n\tlet lastR = eR;\n\n\twhile(eL < eR && rL < rR){\n\t\tlet distanceL = distance(estimated[eL], recorded[rL]);\n\t\tif(distanceL > minDistanceL){\n\t\t\tinterpolate(estimated, lastL, eL, recorded[rL].timestamp, recorded[rL-1].timestamp);\n\t\t\trL++;\n\t\t\tlastL = eL;\n\t\t\tminDistanceL = 200;\n\t\t}else{\n\t\t\teL++;\n\t\t\tminDistanceL = distanceL;\n\t\t}\n\t\tlet distanceR = distance(estimated[eR], recorded[rR]);\n\t\tif(distanceR > minDistanceR){\n\t\t\tinterpolate(estimated, eR, lastR, recorded[rR].timestamp, recorded[rR+1].timestamp);\n\t\t\trR--;\n\t\t\tlastR = eR;\n\t\t\tminDistanceR = 200;\n\t\t}else{\n\t\t\teR--;\n\t\t\tminDistanceR = distanceR;\n\t\t}\n\t}\n}\n\nfunction estimateTime(recorded, estimated){\n\treturn estimateTimestampsNSquared(recorded, estimated);\n}\n\nasync function getEstimatedPath(entries){\n\tif(!entries || entries.length === 0){\n\t\tconsole.warn(\"getEstimatedPath entries length 0.\"); \n\t\treturn []; \n\t}\n\tconst coordinates = entries.map(entry => ([entry.longitude, entry.latitude]));\n\tconst estimated = (await openroute.estimatePath(coordinates))\n\t\t.map(coord => ({longitude: coord[0], latitude: coord[1]}));\n\testimateTime(entries, estimated);\n\treturn estimated;\n}\n\nfunction interpolate(entries, l, r, t1, t2){\n\tconst n = r - l || 1;\n\tconst dt = t2 - t1;\n\tlet Ti = dt/n;\n\tfor(let i = l; i <= r; i++){\n\t\tentries[i].timestampMs = t1 + Ti * ((i-l) || 1);\n\t}\n}\n\n\nexport default { get };","import db from './store.js';\n\nconst MAX_ACCURACY_RADIUS = 50; //discard entries that have accuracy of less than value in m\n\nconst entryKeyFn = (pt) => `${pt.latitude}/${pt.longitude}`;\nconst isAccurate = (pt) => pt.accuracy < MAX_ACCURACY_RADIUS;\nconst tooSimilar = (pt, prev, next) => {\n\tif(!prev || !next){\n\t\treturn false;\n\t}\n\tif(entryKeyFn(prev) !== entryKeyFn(pt)){\n\t\treturn false;\n\t}\n\tif(entryKeyFn(next) !== entryKeyFn(pt)){\n\t\treturn false;\n\t}\n\treturn true;\n}\n\nlet lastPosition;\nasync function getLastPosition(){\n\treturn lastPosition || (await db.location.limit(1).last());\n}\n\nwindow.getLastPosition = getLastPosition;\nasync function updateLastPosition(pos){\n\tlastPosition = pos;\n}\n\nfunction storeLastPos(pos){\n\tdb.location.put(pos);\n\tupdateLastPosition(pos);\n}\n\nlet sharedCompressionWorker;\nfunction getCompressionWorker(){\n\tif(!sharedCompressionWorker){\n\t\tsharedCompressionWorker = new Worker('../workers/compression.worker.js', { type: 'module' });\n\t}\n\treturn sharedCompressionWorker;\n}\n\nasync function put(pos){\n\tlet scWorker = getCompressionWorker();\n\tlet channel = new MessageChannel();\n\tlet lastPos = await getLastPosition();\n\tif(!lastPos){\n\t\treturn storeLastPos(pos);\n\t}\n\n\tlet inEntries = [lastPos, pos];\n\tchannel.port1.onmessage = msg => {\n\t\tif(msg.data.event === 'done'){\n\t\t\tlet outEntries = msg.data.entries;\n\t\t\tif(outEntries.length === 1){\n\t\t\t\t//entries were compressed, so update the last entry\n\t\t\t\tconsole.log('overwritting last position');\n\t\t\t\tlastPos.latitude = outEntries[0].latitude;\n\t\t\t\tlastPos.longitude = outEntries[0].longitude;\n\t\t\t\treturn storeLastPos(lastPos);\n\t\t\t}\n\t\t\t//the new entry is different enough to warrant a new, separate entry\n\t\t\tstoreLastPos(pos);\n\t\t}\n\t}\n\tscWorker.postMessage({entries: inEntries, port: channel.port2}, [channel.port2]);\n}\n\n//TODO: rename to \"simplify\" (or smth else)\nfunction compressPoints(points){\n\tif(!points || points.length === 0){ \n\t\treturn; \n\t}\n\n\treturn new Promise((resolve, reject) => {\n\t\tlet scWorker = getCompressionWorker();\n\t\tlet channel = new MessageChannel();\n\t\tlet port1 = channel.port1;\n\t\tport1.onmessage = msg => {\n\t\t\tif(msg.data.event === 'done'){\n\t\t\t\tresolve(msg.data.entries);\n\t\t\t\tport1.close();\n\t\t\t}\n\t\t}\n\t\tport1.onerrormessage = msg => reject(msg);\t\n\t\tscWorker.postMessage({entries: points, port: channel.port2}, [channel.port2]);\n\t});\n}\n\n\n//TODO: isAccurate check should be moved at a lower level\nasync function bulkPut(entries){\n\tconst compressed = [];\n\tconsole.log('entries ', entries.length);\n\n\tfor(let i = 0, n = entries.length; i < n; i++){\n\t\tlet entry = entries[i];\n\t\tif(isAccurate(entry) && !tooSimilar(entry, entries[i-1], entries[i+1])){\n\t\t\tcompressed.push(entry);\n\t\t}\n\t}\n\n\tawait db.location.bulkPut(compressed);\n\treturn compressed.length;\n}\n\n//newBulkPut accomodates the new native event handling pipeline and fixes the issues raised\n//with old bulkPut. It should gradually replace the old bulkPut.\nasync function newBulkPut(entries){\n\tconst simplified = await compressPoints(entries);\n\treturn db.location.bulkPut(simplified);\n}\n\nfunction getLocationHistory(startMs, endMs){\n\treturn db.location\n\t.where('timestampMs')\n\t.between(startMs, endMs)\n\t.toArray()\n\t.then(compressPoints);\n}\n\nexport default {\n\tgetLocationHistory,\n\tbulkPut,\n\tnewBulkPut,\n\tput\n}\n\n","import AndroidInterface from \"./native/android.js\";\nimport MockInterface from \"./native/mock.js\";\nimport iOSInterface from \"./native/ios.js\";\nimport WebInterface from './native/web.js';\nimport NativeInterface from './native/nativeInterface.js';\n\nconst android = window.Android;\nconst ios = window.iOS;\n\nconst getNative = () => {\n\tif(android){\n\t\treturn new AndroidInterface();\n\t}\n\tif(ios){\n\t\treturn new iOSInterface();\n\t}\n\treturn new WebInterface();\n}\n\nconst nativeInterface = NativeInterface(getNative());\n\n\nexport default nativeInterface;\n","import NativeInterface from './nativeInterface.js';\nimport location from '../../lib/location';\nimport { groupBy, uuidv4 } from '../../lib/util';\n\n\nexport default class AndroidInterface{\n\tconstructor(){\n\t\twindow.AndroidInterface = this;\n\t\tthis.callbackMap = {};\n\t}\n\n\treply(message, { data, error }){\n\t\treturn { id: message.id, data, error };\n\t}\n\n\thandleReply(message){\n\t\tconst { id, data, error } = message;\n\t\tconst cb = this.callback[id];\n\t\t\n\t\tdata && cb.resolve(data) || error && cb.reject(error);\n\t\tdelete this.callbackMap[message.id];\n\t}\n\t\n\tasync receive(message){ //from native\n\t\ttry{\n\t\t\tif(this.callbackMap[message.id]){\n\t\t\t\treturn this.handleReply(message);\n\t\t\t}\n\t\t\tthis.send(this.reply(message, { data: await this.handleMessage(message) }));\n\t\t\treturn;\n\t\t}catch(error){\n\t\t\tthis.send(this.reply(message, { error }));\n\t\t}\n\t}\n\n\tsend(message){ //to native\n\t\twindow.Android.sendMessage(message);\n\t\treturn Promise.race([\n\t\t\tnew Promise((resolve, reject) => { this.callbackMap[message.id] = { resolve, reject }; }),\n\t\t\tnew Promise((resolve, reject) => { setTimeout(() => reject({ error:\"Timeout\" }), 5000); })\n\t\t]);\n\t}\n\n\tsetMessageHandler(handler){\n\t\tthis.handleMessage = handler;\n\t}\n\t\n}\n\n\n\n","import NativeInterface from './nativeInterface.js';\n\nexport default class iOSInterface{\n\n}\n","import db from '../store.js';\nimport NativeInterface from './nativeInterface.js';\nimport geometry from '../geometry.js';\n\nexport default class MockInterface{\n\n\n\tasync proximityCheck(pos){\n\t\ttry{\n\t\t\tconst mockDevices = await db.mockDevices.toArray();\n\t\t\tconst posC = geometry.latLongToCartesian(pos.latitude, pos.longitude, pos.latitude);\n\n\t\t\tconst inProximity = ({devC, devR}) => {\n\t\t\t\treturn geometry.isCircleIntersectingCircle(devC, devR, posC, pos.accuracy);\n\t\t\t}\n\n\t\t\tmockDevices.map(device => ({\n\t\t\t\tdevC: geometry.latLongToCartesian(device.latitude, device.longitude, pos.latitude), \n\t\t\t\tdevR: device.radius,\n\t\t\t\tdevice\n\t\t\t}))\n\t\t\t.filter(inProximity)\n\t\t\t.forEach(dev => {\n\t\t\t\t//super.detectDevice({...(dev.device), timestamp: Date.now()});\n\t\t\t\tconsole.log('device in proximity', dev);\n\t\t\t});\n\t\t}catch(err){\n\t\t\tif(err.name === \"NotFoundError\"){ //TODO: change to instanceof check;\n\t\t\t\tconsole.log('no mock devices found in db');\n\t\t\t}else{\n\t\t\t\tconsole.error(err);\n\t\t\t}\n\t\t}\n\t}\n\n\tmockLocation(pos){\n\t\t//super.updateLocation(pos);\n\t\tthis.proximityCheck(pos);\n\t}\n}\n\nexport const addMockDevice = async mockDevice => await db.mockDevices.put(mockDevice);\nexport const rmMockDevice = async mockDevice => await db.mockDevice.delete(mockDevice);\n\nwindow.mock = {\n\tnativeInterface: new MockInterface(),\n\taddMockDevice,\n\trmMockDevice\n}\n","import { Evented, groupBy } from '../util.js';\n\nimport location from '../location.js';\n\nconst eventHandlers = {\n\tlocation: locationUpdate,\n\t\n}\n\nfunction locationUpdate(events){\n\tconst MIN_ACCURACY = 50; //meters\n\t\n\tlet locations = events.filter(evt => evt.data.accuracy < MIN_ACCURACY)\n\t\t.map(evt => ({...evt.data, timestamp: evt.timestamp}));\n\treturn location.newBulkPut(locations);\n}\n\nfunction UDPHandler(events){}\n\nfunction defaultEventHandler(event){\n\tconsole.log('no event handler found for event of type', event.type);\n}\n\nfunction handleMessage({ type, data }){\n\tif(!type){\n\t\treturn;\n\t}\n\tif(type === 'event'){\n\t\treturn handleEvent(data);\n\t}\n\tthrow \"message type unknown\";\n}\n\nfunction handleEvent(data){\n\treturn Promise.all(\n\t\tObject.values(groupBy(data, \"type\"))\n\t\t\t.map(([type, entries]) => eventHandlers[type](entries))\n\t)\n}\n\nconst nativeInterface = native => {\n\tconst sendMessage = (type, data) => native.send({type, data});\n\tnative.setMessageHandler(handleMessage);\n\tsendMessage('webview_ready');\n\n\treturn {\n\t\ttest: () => sendMessage('test'),\n\t\tgetServices: () => sendMessage(\"get_detection_services\"),\n\t\tsettings:{\n\t\t\ttoggleService: id => sendMessage(\"toggle_detection_service\", { id })\n\t\t}\n\t}\n}\n\n\nexport default nativeInterface;\n","\n\nconst locationService = (webInterface) => {\n\tconst LS_KEY = \"settings_location_service\";\n\tlet listenerId;\n\n\tinit();\n\t\n\tconst sendEvent = (...events) => {\n\t\twebInterface.send({ type: 'event', data: events });\n\t}\n\t\n\tconst sendLocation = (location) => {\n\t\tsendEvent({ type: 'location', data: location });\n\t}\n\n\tfunction init(_this){\n\t\tif(getStatus()){\n\t\t\tstart();\n\t\t}\n\t\treturn _this;\n\t}\n\t\n\tfunction start(){\n\t\tlocalStorage.setItem(LS_KEY, true);\n\t\tlistenerId = navigator.geolocation.watchPosition(geoLoc => {\n\t\t\tsendLocation({\n\t\t\t\ttimestampMs: geoLoc.timestamp || Date.now(),\n\t\t\t\tlatitude: geoLoc.coords.latitude,\n\t\t\t\tlongitude: geoLoc.coords.longitude,\n\t\t\t\taccuracy: geoLoc.coords.accuracy\n\t\t\t});\n\t\t}, error => {\n\t\t\tconsole.error(error);\n\t\t\tstop();\n\t\t},{\n\t\t\tenableHighAccuracy: true\n\t\t});\n\t\t\n\t}\n\n\tfunction stop(){\n\t\tlocalStorage.setItem(LS_KEY, false);\n\t\tnavigator.geolocation.clearWatch(listenerId);\n\t}\n\n\tfunction getStatus(){\n\t\treturn localStorage.getItem(LS_KEY) === 'true' || false;\n\t}\n\n\tfunction getName(){\n\t\treturn \"Location\";\n\t}\n\n\tfunction toggle(){\n\t\tgetStatus()? stop() : start();\n\t\treturn getStatus();\n\t}\n\t\n\treturn {\n\t\tstart,\n\t\tstop,\n\t\ttoggle,\n\t\tgetStatus,\n\t\tgetName\n\t}\n}\n\nconst theWeb  = (webInterface) => {\n\tconst detectionServices = {\n\t\tlocation: locationService(webInterface)\n\t};\n\t\n\tfunction toggleDetectionService({ id }){\n\t\tconsole.log('id is ', id);\n\t\treturn detectionServices[id].toggle();\n\t}\n\t\n\tfunction receiveMessage(message){\n\t\tconst { type, data } = message;\n\t\tif(type === \"toggle_detection_service\"){\n\t\t\treturn toggleDetectionService(data);\n\t\t}\n\t\tif(type === \"get_detection_services\"){\n\t\t\treturn getServices();\n\t\t}\n\t\treturn Promise.reject({error: `Undefined message type '${message.type}'` });\n\t}\n\n\tfunction getServices(){\n\t\treturn Object.entries(detectionServices)\n\t\t\t.map(([id, service]) => ({\n\t\t\t\tid,\n\t\t\t\tname: service.getName(),\n\t\t\t\tstatus: service.getStatus()\n\t\t\t}));\n\t}\n\t\n\treturn {\n\t\treceiveMessage\n\t};\n}\n\n//The reason I split it into theWeb and the WebInterface is to emulate the native counterpart that would\n//exist on native implementations. The WebInterface then looks more similar to AndroidInterface and the\n//IOSInterface classes.\n//This makes code more uniform and lets patterns emerge for future refactoring.\nexport default class WebInterface{\n\tconstructor(){\n\t\tthis.theWeb = theWeb(this);\n\t}\n\t\n\tsend(message){ //to native\n\t\treturn this.theWeb.receiveMessage(message);\n\t}\n\n\treceive(message){ //from native\n\t\treturn this.handleMessage(message);\n\t}\n\n\tsetMessageHandler(handler){\n\t\tthis.handleMessage = handler;\n\t}\n}\n","import credentials from './credentials.js';\nimport { chunk, flatten } from './util.js';\n\n\nasync function directionsRequest(coordinates){\n\tif(coordinates.length < 2){\n\t\treturn coordinates;\n\t}\n\n\tconst endPoint = 'https://api.openrouteservice.org/v2/directions/foot-walking/geojson';\n\tconst apiKey = await credentials.getKey('openroute');\n    const body = JSON.stringify({ coordinates });\n    if(!apiKey){\n        throw new Error(\"Missing api key for openroute\");\n    }\n\treturn fetch(endPoint,{\n\t\tmethod: \"POST\",\n\t\theaders:{\n\t\t\t'Content-Type': 'application/json',\n\t\t\t'Accept': 'application/json, application/geo+json, application/gpx+xml, img/png; charset=utf-8',\n\t\t\t'Authorization': apiKey,\n\t\t},\n\t\tbody\n\t})\n\t.then(res => res.json())\n\t.then(data => data.features[0].geometry.coordinates);\n}\n\nasync function estimatePath(coordinates){\n\tif(coordinates.length < 2){\n\t\treturn coordinates;\n\t}\n\n\treturn Promise.all(chunk(coordinates, 40).map(directionsRequest)).then(flatten);\n}\t\n\nexport default { estimatePath };","const HOST = 'http://192.168.43.33';\nconst PORT = '3000';\n\nconst defaultHeaders = {\n\t'Content-Type': 'application/json'\n}\n\nasync function getDemoRoute(points){\n\tlet coordinates = points.map(pt => ([pt.longitude, pt.latitude]));\n\tlet res =  await POST('/demo-openroute', { coordinates });\n\tif(res.error){\n\t\tthrow res.error;\n\t}\n\treturn res.features[0].geometry.coordinates.map(([lon, lat]) => [lat,lon]);\n}\n\nasync function getMarkers({ lat, lon }){\n\ttry{\n\t\treturn await GET(`/v2/markers?lat=${lat}&lon=${lon}&precision=4`);\n\t}catch(err){\n\t\tconsole.error(err);\n\t\tthrow err;\n\t}\n}\n\n//min = [ latlon, latlon ] - lower left corner\n//max = [ latlon, latlon ] - upper right corner\nasync function getDevicesBounded([min, max]){\n    const [minlat, minlon] = min;\n    const [maxlat, maxlon] = max;\n    const query = `minlat=${minlat}&minlon=${minlon}&maxlat=${maxlat}&maxlon=${maxlon}`;\n    const res = await GET(`/v2/markers?${query}`);\n    if(res.error){\n        console.log('error', res.error);\n        throw new Error(res.error);\n    }\n    return res.results;\n}\n\nfunction appendDefaultHeaders(headers){\n\treturn Object.assign({}, defaultHeaders, headers);\n}\n\nfunction api(endpoint, opts){\n\topts.headers = appendDefaultHeaders(opts.headers);\n\treturn fetch(`${HOST}:${PORT}${endpoint}`, opts)\n\t.then(res => res.json());\n}\n\nfunction GET(endpoint, opts){\n\treturn api(endpoint, {...opts, method:'GET'});\n}\n\nfunction POST(endpoint, body, opts){\n\treturn api(endpoint, {...opts, method:'POST', body: JSON.stringify(body)});\n}\n\nfunction DELETE(endpoint, body, opts){\n\treturn api(endpoint, {...opts, method:'DELETE', body: JSON.stringify(body)});\n}\n\nfunction PUT(endpoint, body, opts){\n\treturn api(endpoint, {...opts, method:'PUT', body: JSON.stringify(body)});\n}\n\nexport default {\n\tgetMarkers,\n    getDemoRoute,\n    getDevicesBounded\n};","//handle persistent data storage on the client side\n//!! Note that schema declarations only declare the primary keys.\n//\t So do NOT add every field you want to use. Only add the primary keys.\nimport Dexie from 'dexie';\n\nconst db = new Dexie('test');\n\ndb.version(1).stores({\n    location: 'timestampMs',\n    device: 'id, lat, long',\n    meta: 'id',\n    mock_device: '++id, lat, long',\n    intersection: '++id, startMs, endMs',\n    openroute: 'timestampMs'\n});\n\n\nexport default db;\n","function noopTag(t) {\n\tfor (var o = [t[0]], i = 1, l = arguments.length; i < l; i++){\n\t\to.push(arguments[i], t[i]);\n\t}\n\treturn o.join('').trim();\n}\n\nexport function uuidv4() {\n  return ([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g, c =>\n    (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\n  );\n}\n\nexport function groupBy(data, key){\n\treturn data.reduce((acc, curr) => {\n\t\t(acc[curr[key]] = acc[curr[key]] || []).push(curr)\n\t\treturn acc;\n\t},{});\n}\n\nexport function htmlCompile(t) {\n\tfor (var o = [t[0]], i = 1, l = arguments.length; i < l; i++){\n\tlet val = arguments[i];\n\t\tif(val instanceof HTMLElement){\n\t\t\tval = `<fosh-placeholder id=\"${i}\"></fosh-placeholder>`;\n\t\t}\n\t\to.push(val, t[i]);\n\t}\n\n\tlet tempNode = document.createElement('template'); \n\tlet htmlStr = o.join('').trim();\n\ttempNode.innerHTML = htmlStr;\n\ttempNode = tempNode.content;\n\n\tfor(const pHolder of tempNode.querySelectorAll('fosh-placeholder')){\n\t\tpHolder.replaceWith(arguments[pHolder.getAttribute('id')]);\n\t}\n\n\treturn tempNode;\n}\n\nexport function cssCompile(t) {\n\tfor (var o = [t[0]], i = 1, l = arguments.length; i < l; i++){\n\t\to.push(arguments[i], t[i]);\n\t}\n\n\tlet styleNode = document.createElement('style');\n\tstyleNode.innerHTML = o.join('').trim();\n\t\n\treturn styleNode;\n}\n\n\n//could use this instead:\n//(c)(opied from)https://gist.github.com/aishikaty/dcb6e7f3441c1c8321a34437139bf17f\nexport function htmlEscape(strings, ...values){\n  return Array.from(strings).map((string, index) => (\n    string + (\n      Array.isArray(values[index])\n      ? values[index].join(\"\")\n      : (new Option(values[index])).innerHTML\n    )\n  )).join('');\n}\n\nexport function gel(elem){ return document.querySelector(elem); }\nexport function gell(elem){ return document.querySelectorAll(elem); }\nexport function deNormCoord(coord){ return coord/10000000; }\n\nexport const html = noopTag;\nexport const css = noopTag;\n\n\nexport function chunk(arr, size){\n\tlet chunks = Math.ceil(arr.length / size);\n\t\n\treturn arr.reduce((acc, curr, i)=>{\n\t\tlet groupIndex = Math.floor(i / size);\n\t\tacc[groupIndex].push(curr);\n\t\treturn acc;\n\t}, Array(chunks).fill(null).map(() => ([])));\n}\n\n//flatten one levelx\nexport function flatten(arr){\n\treturn arr.reduce((acc, curr)=>{\n\t\tacc = acc.concat(curr);\n\t\treturn acc;\n\t}, []);\n}\n\n//SHOULD BE DEPRECATED\nexport const DEVICE_RADIUS = 33;\n\nexport class Evented{\n\tconstructor(){\n\t\tthis.callbacks = {};\n\t\treturn this;\n\t}\n\n\ttrigger(id, ...args){\n\t\tif(this.callbacks[id] === undefined){\n\t\t\treturn;\n\t\t}\n\t\tthis.callbacks[id].forEach(cb => cb.apply(null, args));\n\t}\n\n\ton(id, cb){\n\t\t(this.callbacks[id] = this.callbacks[id] || []).push(cb);\n\t\treturn cb;\n\t}\n\n\tonce(id, cb){\n\t\tconst cbOnce = function(){\n\t\t\tcb.apply(null, arguments);\n\t\t\tthis.off(id, cb);\n\t\t}\n\n\t\tthis.on(id, cbOnce);\n\t\treturn this;\n\t}\n\n\toff(id, cb){\n\t\tlet indx = this.callbacks[id].find(cb);\n\t\tthis.callbacks[id].splice(indx,1);\n\t\treturn this;\n\t}\n}\n\nexport const Unique = (field) => {\n\tlet map ={};\n\tconst keyFn = x => (field && x[field]) || x;\n\treturn (x => {\n\t\tconst key = keyFn(x) ;\n\t\tif(map[key]){\n\t\t\treturn false;\n\t\t}\n\t\tmap[key] = x;\n\t\treturn true;\n\t});\n}\n\nexport default {gel, html, deNormCoord, DEVICE_RADIUS, chunk, Evented, cssCompile};\n","import { SELECT_DATE } from '../actions/history.js';\nimport { UPDATE_HISTORY_ENTRIES } from '../actions/history';\n\nconst defaultState = {\n    selectedDateISO: new Date().toISOString(),\n    entries:{\n        locations: [],\n        devices: [],\n        intersections: [],\n        bounds: [],\n        openroutes: []\n    }\n}\n\nconst historyReducer = (state = defaultState, action) => {\n    console.log('called reducer', state, action);\n    switch (action.type){\n        case SELECT_DATE:\n            return {\n                ...state,\n                selectedDateISO: action.selectedDateISO\n            }\n        case UPDATE_HISTORY_ENTRIES:\n            return {\n                ...state,\n                entries: action.entries\n            }\n        default:\n            return state;\n    }\n}\n\nexport default historyReducer;","import { combineReducers } from 'redux';\nimport historyReducer from './history';\nimport settingsReducer from './settings/';\n\nexport default combineReducers({\n\thistory: historyReducer,\n\tsettings: settingsReducer\n});\n","import {\n\tUPDATE_STATUS,\n\tSET_LIST\n} from '../../actions/settings/detectionServices';\n\nexport default (state = [], action) => {\n\tswitch(action.type){\n\tcase SET_LIST:\n\t\treturn action.list;\n\tcase UPDATE_STATUS:\n\t\treturn state.map(service => {\n\t\t\tlet newService = Object.assign({}, service);\n\t\t\tif(newService.id === action.service){\n\t\t\t\tnewService.status = action.status;\n\t\t\t}\n\t\t\treturn newService;\n\t\t});\n\tdefault:\n\t\treturn state;\n\t}\n}\n","import {combineReducers} from 'redux';\nimport detectionServices from './detectionServices';\n\nexport default combineReducers({\n\tdetectionServices\n})\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-3-1!../../node_modules/postcss-loader/src/index.js??postcss!./google-import.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-3-1!../../node_modules/postcss-loader/src/index.js??postcss!./google-import.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-3-1!../../node_modules/postcss-loader/src/index.js??postcss!./google-import.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/less-loader/dist/cjs.js!./history.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/less-loader/dist/cjs.js!./history.less\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/less-loader/dist/cjs.js!./history.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-3-1!../../node_modules/postcss-loader/src/index.js??postcss!./intersection-card.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-3-1!../../node_modules/postcss-loader/src/index.js??postcss!./intersection-card.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-3-1!../../node_modules/postcss-loader/src/index.js??postcss!./intersection-card.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-3-1!../../node_modules/postcss-loader/src/index.js??postcss!./intersection-list.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-3-1!../../node_modules/postcss-loader/src/index.js??postcss!./intersection-list.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-3-1!../../node_modules/postcss-loader/src/index.js??postcss!./intersection-list.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/less-loader/dist/cjs.js!./settings.less\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/less-loader/dist/cjs.js!./settings.less\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/less-loader/dist/cjs.js!./settings.less\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACNA;;;;;;;;;;;ACAA;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAFA;AAKA;AACA;AAAA;AACA;AACA;AAFA;AACA;AAKA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC3BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAHA;AAMA;AACA;AACA;AACA;AAFA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;ACrCA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACnBA;AACA;AACA;AAEA;AACA;AACA;AAFA;AACA;AAIA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;;;;;;;;;;;;;;;;;;;;ACjFA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACxBA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AADA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AAEA;AACA;AAAA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAKA;AACA;AACA;AACA;AACA;AACA;AAEA;AADA;AANA;AAYA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAlHA;;;;;;;;;;;;;;;;;ACLA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;;;;;;;;;;;;;;;;;;;ACZA;AACA;AACA;AACA;AAEA;;;;;;AAMA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AACA;AACA;AADA;AACA;AAGA;AACA;AADA;AACA;AAIA;;;;;;;;;;;;;;;;;;;;ACjCA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AADA;AAGA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AAnCA;AAqCA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAEA;AACA;AAEA;AACA;AAAA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AADA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;;;;;;;;;;;;;AC/NA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAEA;;;;;;;;;;;;;;;;;;;;;;;ACxCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAHA;AAFA;AACA;AAQA;AACA;AACA;AACA;AACA;AAFA;AAFA;AACA;AAOA;AACA;AACA;AACA;AACA;AACA;AAHA;AAFA;AACA;AAQA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAHA;AAFA;AACA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AACA;AACA;AACA;AADA;AACA;AAGA;;;;;;;;;;;;;;;;;;;;;AChFA;AACA;AASA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAIA;AACA;AAEA;AACA;AADA;AAFA;AACA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AAGA;AACA;AAGA;;;;;;;;;;;AC1HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAGA;AACA;AACA;AAAA;;;;;;;;;;;;AC5BA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAOA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;;;;;;;;;;;;ACpCA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;;;ACbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AAEA;AAEA;AACA;AAAA;AAGA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AAGA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;;;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AAEA;AACA;AACA;AAGA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AAGA;AACA;AAAA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAWA;;;;;;;;;;;;ACtLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAEA;AACA,gEAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;;;;;;;;;;;;;ACnMA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA,+DAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AADA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;;;;;;;;;;;;;ACzHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAGA;;;;;;;;;;;;ACtBA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AAzCA;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAEA;;;;;;;;;;;;ACFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AAGA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAOA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAnCA;AAqCA;AACA;AAEA;AACA;AACA;AACA;AAHA;;;;;;;;;;;;AC5CA;AAAA;AAAA;AAAA;AAEA;AAEA;AACA;AADA;AACA;AAIA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AADA;AAHA;AAOA;AACA;AAEA;;;;;;;;;;;;ACrDA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAMA;AACA;AACA;AACA;AACA;AADA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AACA;AADA;AACA;AAGA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AADA;AAGA;AAGA;AACA;AACA;AACA;AACA;AADA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAhBA;;;;;;;;;;;;AC3GA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AAPA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;;;ACpCA;AAAA;AACA;AAEA;AACA;AADA;AACA;AAGA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AADA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;;;;;;;;;;;;ACjEA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAUA;;;;;;;;;;;;ACjBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAIA;AACA;AAAA;AACA;AAOA;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AAGA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAjCA;AAmCA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;AC9IA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAFA;AACA;AAUA;AACA;AACA;AAAA;AACA;AACA;AAEA;AAFA;AACA;AAGA;AACA;AAEA;AAFA;AACA;AAGA;AACA;AAZA;AAcA;AACA;AACA;;;;;;;;;;;;AChCA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AACA;AACA;AAFA;;;;;;;;;;;;ACJA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAZA;AAcA;;;;;;;;;;;;ACpBA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AADA;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AAGA;AAEA;AAKA;AACA,eA8BA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AADA;AAIA;AACA;AACA;AAAA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;;;;;;;;;;;AC5IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;A","sourceRoot":""}